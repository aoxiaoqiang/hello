(function(t){function e(e){for(var s,r,o=e[0],u=e[1],c=e[2],d=0,f=[];d<o.length;d++)r=o[d],i[r]&&f.push(i[r][0]),i[r]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(t[s]=u[s]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,o=1;o<n.length;o++){var u=n[o];0!==i[u]&&(s=!1)}s&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},i={1:0},a=[];function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=u;a.push([2,0]),n()})({2:function(t,e,n){t.exports=n("Vtdi")},Vtdi:function(t,e,n){"use strict";n.r(e);n("VRzm"),n("D66Q");var s=n("Kw5r"),i=n("XJYT"),a=n.n(i),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",attrs:{id:"app"}},[n("el-row",{staticClass:"total-info",attrs:{type:"flex",align:"middle",justify:"center"}},[n("h2",[t._v("观察者模式(目标 - 观察者)")])]),n("el-row",{staticClass:"total-info",attrs:{type:"flex",align:"middle"}},[n("el-col",{attrs:{span:24}},[n("span",[t._v("目标数: "+t._s(t.courses.length))]),t._v(" / "),n("span",[t._v("订阅者数: "+t._s(t.students.length))])])],1),n("div",{staticClass:"info-list-box"},[n("el-row",{staticClass:"list-main-title",attrs:{type:"flex",align:"middle",justify:"space-between"}},[t._v("\n      课程列表(目标)"),n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-news"},on:{click:function(e){t.addObject("c")}}},[t._v("添加课程")])],1),n("el-row",{attrs:{gutter:12}},t._l(t.courses,function(e,s){return n("el-col",{key:s,attrs:{span:8}},[n("el-card",{staticClass:"info-card",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix header-line",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("课程:"+t._s(e.name))]),n("div",{staticClass:"subcribe-tip"},[t._v("订阅者( "),n("span",{staticClass:"sub-total"},[t._v(t._s(e.StudentList.students.length)+"人订阅 )")])]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"发送 “"+e.name+"” 课程通知",placement:"top"}},[n("el-button",{staticClass:"btn-notice el-icon-upload",attrs:{size:"mini",type:"danger",circle:""},on:{click:function(n){t.publishNotice(e)}}})],1)],1),n("div",{staticClass:"learners"},t._l(e.StudentList.students,function(e,s){return n("div",{key:s},[t._v(t._s(e.name))])}))])],1)}))],1),n("div",{staticClass:"info-list-box"},[n("el-row",{staticClass:"list-main-title",attrs:{type:"flex",align:"middle",justify:"space-between"}},[t._v("\n      订阅者列表(观察者)"),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-view"},on:{click:function(e){t.addObject("s")}}},[t._v("添加学生")])],1),n("el-row",{attrs:{gutter:12}},t._l(t.students,function(e,s){return n("el-col",{key:s,attrs:{span:8}},[n("el-card",{staticClass:"info-card student-card",attrs:{shadow:"hover"}},[n("el-dropdown",{staticClass:"btn-notice",attrs:{size:"medium"},on:{command:t.subscribeCourse}},[n("span",{staticClass:"demonstration"},[t._v("订阅课程"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.courses,function(s,i){return n("el-dropdown-item",{key:i,attrs:{command:{student:e,course:s}}},[t._v(t._s(s.name))])}))],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"清除消息记录",placement:"top"}},[n("el-button",{staticClass:"btn-clear-message el-icon-delete",attrs:{size:"mini",type:"info",circle:""},on:{click:function(n){t.clearMessage(e)}}})],1),n("div",{staticClass:"c-name"},[n("el-badge",{staticClass:"item-badge",attrs:{hidden:0==e.message.length,value:e.message.length}},[t._v("\n              学生: "+t._s(e.name)+"\n            ")])],1),n("div",[n("div",{staticClass:"c-tag-line"},t._l(e.course,function(s,i){return n("el-tag",{key:i,staticClass:"c-tag",attrs:{size:"small",closable:""},on:{close:function(n){t.unSubcribe(e,s)}}},[t._v(t._s(s))])})),t._l(e.message,function(s){return e.message.length>0?n("div",{key:s.t,staticClass:"message-text"},[n("i",{staticClass:"el-icon-bell msg-color"}),t._v(" ["+t._s(t.forMateTimestamps(s.t))+"]"+t._s(s.msg)+"\n            ")]):t._e()})],2)],1)],1)}))],1)],1)},o=[],u=(n("f3/d"),n("rGqo"),n("xmWZ")),c=n("qpph"),l=function(){function t(){Object(u["a"])(this,t),this.students=[]}return Object(c["a"])(t,[{key:"add",value:function(t){this.students.push(t)}},{key:"remove",value:function(t){this.students=this.students.filter(function(e){return e.name!==t})}},{key:"get",value:function(t){var e=this.filter(function(e,n,s){return t===e.name});return e[0]}},{key:"getStudentNumbers",value:function(){return this.students.length}},{key:"filter",value:function(t){return this.students.map(t)}}]),t}(),d=l,f=function(){function t(e){Object(u["a"])(this,t),this.name=e,this.StudentList=new d}return Object(c["a"])(t,[{key:"add",value:function(t){return this.StudentList.add(t),this}},{key:"remove",value:function(t){return this.StudentList.remove(t),this}},{key:"getStudentNumbers",value:function(){return this.StudentList.getStudentNumbers()}},{key:"notify",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var s=this.StudentList.students;s.forEach(function(t){t.handleCourseNotice.apply(t,e)})}},{key:"get",value:function(t){return this.StudentList.get(t)}}]),t}(),h=f,m=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(u["a"])(this,t),this.name=e,this.course=[],this.handleCourseNotice=n,this.message=[]}return Object(c["a"])(t,[{key:"subscribe",value:function(t){var e=this,n=t.StudentList.students,s=n.some(function(t){return t.name===e.name});return s||(t.add(this),this.course.push(t.name)),this}},{key:"unSubscribe",value:function(t){var e=this,n=t.StudentList.students,s=n.some(function(t){return t.name===e.name});return console.log("course"),console.log(this.name),console.log(t),s&&(t.remove(this.name),this.course=this.course.filter(function(e){return e!==t.name})),this}},{key:"clearMessage",value:function(){this.message=[]}}]),t}(),p=m,v={name:"app",components:{},data:function(){return{courses:[],students:[],cols:[],form:{type:[]}}},created:function(){this.initData()},methods:{forMateTimestamps:function(t){var e=new Date(t);return" ".concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds()," ").concat(e.getMilliseconds()," ")},initData:function(){this.courses=[new h("JavaScript"),new h("HTML"),new h("CSS")];var t=new p("张小明",function(t){this.message.unshift({t:(new Date).getTime(),msg:t})}),e=new p("哈哈",function(t){this.message.unshift({t:(new Date).getTime(),msg:t})}),n=new p("小强",function(t){this.message.unshift({t:(new Date).getTime(),msg:t})});t.subscribe(this.courses[0]).subscribe(this.courses[2]),e.subscribe(this.courses[0]).subscribe(this.courses[1]),n.subscribe(this.courses[0]).subscribe(this.courses[1]).subscribe(this.courses[2]),this.students=[t,e,n]},subscribeCourse:function(t){var e=t.student,n=t.course;e.subscribe(n)},unSubcribe:function(t,e){this.courses.forEach(function(n){e===n.name&&t.unSubscribe(n)})},clearMessage:function(t){t.clearMessage()},publishNotice:function(t){var e=["更新啦","有新的课程哦~~","需要你完成的练习搞定了吧","周报写了吗？？"];t.notify("课程消息: “".concat(t.name,"”").concat(e[Math.random()*e.length>>0]))},addObject:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"c",n="courses",s="课程";"s"===e&&(n="students",s="学生"),this.openInputBox("请输入要添加的".concat(s,"名称"),"".concat(s,"添加提示")).then(function(i){if(i){i=i.trim();var a=t[n].some(function(t){return t.name===i});if(a)t.$notify({title:"警告",message:"".concat(s," “").concat(i,"” 已经存在，不要重复添加哦~"),duration:2e3,type:"warning"});else{var r=new h(i);"s"===e&&(r=new p(i,function(t){this.message.unshift({t:(new Date).getTime(),msg:t})})),t[n].push(r)}}})},openInputBox:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"提示";return this.$prompt(t,e,{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"课程名称不能为空哦",roundButton:!0}).then(function(t){var e=t.value;return e}).catch(function(){})}}},g=v,b=(n("rAmE"),n("KHd+")),y=Object(b["a"])(g,r,o,!1,null,null,null),w=y.exports;s["default"].use(a.a),s["default"].config.productionTip=!1,new s["default"]({render:function(t){return t(w)}}).$mount("#app")},q6ma:function(t,e,n){},rAmE:function(t,e,n){"use strict";var s=n("q6ma"),i=n.n(s);i.a}});
//# sourceMappingURL=app.f34b9146.js.map